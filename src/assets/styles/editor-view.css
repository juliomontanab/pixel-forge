/**
 * Editor View Styles
 * 
 * Extracted from EditorView.vue for better maintainability.
 * All selectors are prefixed with .editor-view to prevent style leaking.
 * 
 * Usage: The root element must have class="editor-view"
 */

.editor-view {
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: var(--bg-dark);
  overflow: hidden;
}

/* Header */
.editor-view .editor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-sm) var(--space-md);
  background: var(--bg-medium);
  border-bottom: 4px solid var(--primary);
  flex-shrink: 0;
}

.editor-view .header-left,
.editor-view .header-right {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.editor-view .back-btn {
  background: transparent;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
}

.editor-view .back-btn:hover {
  color: var(--accent);
}

.editor-view .project-info {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.editor-view .project-name-input {
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-family: 'Press Start 2P', monospace;
  font-size: 12px;
  padding: var(--space-xs);
  border-bottom: 2px solid transparent;
}

.editor-view .project-name-input:focus {
  outline: none;
  border-bottom-color: var(--accent);
}

.editor-view .header-btn {
  background: var(--bg-light);
  border: 2px solid var(--bg-light);
  color: var(--text-primary);
  padding: var(--space-sm) var(--space-md);
  cursor: pointer;
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  transition: all var(--transition-fast);
}

.editor-view .header-btn:hover {
  background: var(--primary);
  border-color: var(--primary);
  color: var(--bg-dark);
}

/* Main area */
.editor-view .editor-main {
  flex: 1;
  display: flex;
  overflow: hidden;
}

/* Panels */
.editor-view .panel {
  width: 240px;
  background: var(--bg-medium);
  display: flex;
  flex-direction: column;
  transition: width var(--transition-normal);
  flex-shrink: 0;
}

/* Remove top and bottom borders from panels */
.editor-view .panel.pixel-border {
  border-top: none;
  border-bottom: none;
  position: relative;
}

.editor-view .panel:not(.open) {
  width: 0;
  border: none;
}

.editor-view .panel:not(.open) .panel-content,
.editor-view .panel:not(.open) .panel-header {
  display: none;
}

/* Panel Tabs - Rounded Style */
.editor-view .panel-tab {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 8px;
  background: var(--bg-medium);
  border: 2px solid var(--primary);
  cursor: pointer;
  z-index: 10;
  transition: all var(--transition-fast);
}

/* Left tab - rounded on right side */
.editor-view .left-tab {
  right: 0;
  transform: translate(100%, -50%);
  border-left: none;
  border-radius: 0 12px 12px 0;
}

/* Right tab - rounded on left side */
.editor-view .right-tab {
  left: 0;
  transform: translate(-100%, -50%);
  border-right: none;
  border-radius: 12px 0 0 12px;
}

.editor-view .panel-tab:hover {
  background: var(--bg-light);
  border-color: var(--accent);
}

.editor-view .panel-tab:hover .tab-text,
.editor-view .panel-tab:hover .tab-arrow {
  color: var(--accent);
}

.editor-view .tab-text {
  writing-mode: vertical-rl;
  text-orientation: mixed;
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--primary);
  letter-spacing: 2px;
  transition: color var(--transition-fast);
}

.editor-view .left-tab .tab-text {
  transform: rotate(180deg);
}

.editor-view .tab-arrow {
  font-size: 10px;
  color: var(--text-muted);
  transition: color var(--transition-fast);
}

/* Panel closed state - show only tab */
.editor-view .panel:not(.open) .panel-tab {
  background: var(--bg-dark);
}

.editor-view .panel-header {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  border-bottom: 2px solid var(--bg-light);
}

.editor-view .left-panel .panel-header {
  justify-content: space-between;
}

.editor-view .panel-title {
  font-size: 10px;
  color: var(--primary);
  margin: 0;
  white-space: nowrap;
}

.editor-view .panel-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-sm);
}

/* Element sections */
.editor-view .element-section {
  margin-bottom: var(--space-md);
}

.editor-view .section-header {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-xs) var(--space-sm);
  background: var(--bg-light);
  margin-bottom: var(--space-xs);
  cursor: pointer;
  user-select: none;
}

.editor-view .section-header:hover {
  background: var(--bg-medium);
}

.editor-view .collapse-icon {
  font-size: 8px;
  color: var(--text-muted);
  width: 12px;
  text-align: center;
}

.editor-view .select-all-checkbox {
  width: 12px;
  height: 12px;
  cursor: pointer;
  accent-color: var(--primary);
}

.editor-view .visibility-btn {
  background: transparent;
  border: none;
  font-size: 12px;
  cursor: pointer;
  padding: 0 4px;
  opacity: 1;
  transition: opacity var(--transition-fast), filter var(--transition-fast);
  position: relative;
  display: inline-block;
}

.editor-view .visibility-btn.hidden {
  opacity: 0.5;
  filter: grayscale(1);
}

.editor-view .visibility-btn.hidden::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 2px;
  right: 2px;
  height: 2px;
  background: var(--error);
  transform: rotate(-45deg);
  pointer-events: none;
}

.editor-view .visibility-btn:hover {
  transform: scale(1.1);
}

.editor-view .element-section.collapsed .section-header {
  margin-bottom: 0;
}

.editor-view .section-icon {
  font-size: 12px;
}

.editor-view .section-name {
  flex: 1;
  font-size: 10px;
  color: var(--text-primary);
}

.editor-view .section-count {
  font-size: 10px;
  color: var(--text-muted);
}

.editor-view .add-btn {
  background: transparent;
  border: 1px solid var(--text-muted);
  color: var(--text-muted);
  width: 18px;
  height: 18px;
  cursor: pointer;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor-view .add-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

.editor-view .reset-btn {
  background: transparent;
  border: 1px solid var(--text-muted);
  color: var(--text-muted);
  width: 18px;
  height: 18px;
  cursor: pointer;
  font-size: 11px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 2px;
}

.editor-view .reset-btn:hover {
  border-color: var(--warning);
  color: var(--warning);
}

.editor-view .section-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.editor-view .element-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-xs) var(--space-sm);
  cursor: pointer;
  font-size: 10px;
  transition: background var(--transition-fast);
}

.editor-view .element-item:hover {
  background: var(--bg-light);
}

.editor-view .element-item.selected {
  background: rgba(201, 162, 39, 0.2);
  border-left: 2px solid var(--primary);
}

.editor-view .item-icon {
  font-size: 10px;
}

.editor-view .item-id {
  color: var(--text-muted);
  font-size: 8px;
}

.editor-view .item-name {
  color: var(--text-primary);
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.editor-view .empty-section {
  color: var(--text-muted);
  font-size: 10px;
  padding: var(--space-sm);
  text-align: center;
}

.editor-view .item-badge {
  font-size: 10px;
  margin-left: auto;
}

.editor-view .item-badge.interactive {
  color: var(--accent);
  title: "Interactive";
}

/* Animation item extended layout */
.editor-view .animation-item-extended {
  flex-direction: column !important;
  align-items: flex-start !important;
  gap: 4px;
  padding: 6px 8px !important;
}

.editor-view .animation-item-main {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
}

.editor-view .animation-item-main .item-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.editor-view .animation-item-usage {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding-left: 20px;
}

.editor-view .usage-tag {
  font-size: 9px;
  padding: 2px 6px;
  background: rgba(0, 212, 255, 0.2);
  color: var(--accent);
  border-radius: 3px;
  border: 1px solid rgba(0, 212, 255, 0.3);
}

.editor-view .usage-tag.unused {
  background: rgba(100, 100, 100, 0.2);
  color: #888;
  border-color: rgba(100, 100, 100, 0.3);
  font-style: italic;
}

/* Canvas area */
.editor-view .canvas-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.editor-view .canvas-container {
  flex: 1;
  overflow: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-xl);
}

.editor-view .canvas-wrapper {
  position: relative;
  background: var(--bg-card);
  box-shadow: var(--shadow-pixel);
}

.editor-view .canvas-background {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: repeating-linear-gradient(
.editor-view 45deg,
.editor-view var(--bg-dark) 0px,
.editor-view var(--bg-dark) 10px,
.editor-view var(--bg-medium) 10px,
    var(--bg-medium) 20px
  );
}

.editor-view .background-placeholder {
  text-align: center;
  color: var(--text-muted);
  font-size: 32px;
}

/* Canvas Grid */
.editor-view .canvas-grid {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image:
.editor-view linear-gradient(to right,
.editor-view rgba(255,
.editor-view 215,
.editor-view 0,
.editor-view 0.1) 1px,
.editor-view transparent 1px),
.editor-view linear-gradient(to bottom,
.editor-view rgba(255,
.editor-view 215,
.editor-view 0,
.editor-view 0.1) 1px,
.editor-view transparent 1px);
  background-size: var(--grid-size) var(--grid-size);
}

.editor-view .grid-center-h {
  position: absolute;
  left: 0;
  right: 0;
  top: var(--center-y);
  height: 2px;
  background: rgba(255, 215, 0, 0.4);
  box-shadow: 0 0 4px rgba(255, 215, 0, 0.3);
}

.editor-view .grid-center-v {
  position: absolute;
  top: 0;
  bottom: 0;
  left: var(--center-x);
  width: 2px;
  background: rgba(255, 215, 0, 0.4);
  box-shadow: 0 0 4px rgba(255, 215, 0, 0.3);
}

.editor-view .elements-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.editor-view .element-rect {
  position: absolute;
  border: 2px solid;
  pointer-events: all;
  cursor: pointer;
  display: flex;
  transform-origin: center center;
  align-items: center;
  justify-content: center;
}

/* Walkbox SVG Polygon Editor */
.editor-view .walkbox-svg-layer {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 5;
}

.editor-view .walkbox-polygon {
  fill: rgba(0, 255, 136, 0.15);
  stroke: var(--color-walkbox);
  stroke-width: 2;
  stroke-dasharray: 8 4;
  cursor: move;
  pointer-events: all;
  transition: fill 0.15s ease;
}

.editor-view .walkbox-polygon:hover {
  fill: rgba(0, 255, 136, 0.25);
}

.editor-view .walkbox-polygon.selected {
  fill: rgba(0, 255, 136, 0.3);
  stroke-width: 3;
  filter: drop-shadow(0 0 6px var(--color-walkbox));
}

.editor-view .walkbox-edge {
  stroke: transparent;
  stroke-width: 16;
  cursor: crosshair;
  pointer-events: all;
}

.editor-view .walkbox-edge:hover {
  stroke: rgba(0, 255, 136, 0.4);
}

/* "+" button to add vertices on edges */
.editor-view .walkbox-edge-add {
  cursor: pointer;
  pointer-events: all;
  opacity: 0.6;
  transition: opacity 0.15s ease;
}

.editor-view .walkbox-edge-add:hover {
  opacity: 1;
}

.editor-view .walkbox-edge-add-bg {
  fill: rgba(0, 0, 0, 0.7);
  stroke: var(--color-walkbox);
  stroke-width: 2;
}

.editor-view .walkbox-edge-add:hover .walkbox-edge-add-bg {
  fill: var(--color-walkbox);
}

.editor-view .walkbox-edge-add-icon {
  fill: var(--color-walkbox);
  font-size: 14px;
  font-weight: bold;
  text-anchor: middle;
  dominant-baseline: central;
  font-family: Arial, sans-serif;
}

.editor-view .walkbox-edge-add:hover .walkbox-edge-add-icon {
  fill: #000;
}

.editor-view .walkbox-vertex {
  fill: var(--color-walkbox);
  stroke: #fff;
  stroke-width: 2;
  cursor: grab;
  pointer-events: all;
  transition: r 0.15s ease, fill 0.15s ease;
}

.editor-view .walkbox-vertex:hover {
  r: 8;
  fill: #fff;
  stroke: var(--color-walkbox);
}

.editor-view .walkbox-vertex.can-delete:hover {
  fill: var(--error);
  stroke: #fff;
}

.editor-view .walkbox-vertex:active {
  cursor: grabbing;
}

.editor-view .walkbox-label {
  fill: var(--color-walkbox);
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  text-anchor: middle;
  dominant-baseline: middle;
  pointer-events: none;
  text-shadow: 1px 1px 0 rgba(0,0,0,0.8), -1px -1px 0 rgba(0,0,0,0.8);
}

.editor-view .walkbox-rotate-handle {
  fill: var(--accent);
  stroke: var(--bg-dark);
  stroke-width: 2;
  cursor: grab;
  pointer-events: all;
  transition: r 0.15s ease, fill 0.15s ease;
}

.editor-view .walkbox-rotate-handle:hover {
  fill: var(--primary);
  r: 10;
}

.editor-view .walkbox-rotate-handle:active {
  cursor: grabbing;
}

.editor-view .walkbox-rotate-line {
  stroke: var(--accent);
  stroke-width: 2;
  pointer-events: none;
}

.editor-view .exit-element {
  border-color: var(--color-exit);
  background: rgba(255, 107, 107, 0.2);
}

.editor-view .exit-element.selected {
  border-width: 3px;
  box-shadow: 0 0 10px var(--color-exit);
}

.editor-view .actor-element {
  border-color: var(--color-actor);
  background: rgba(168, 85, 247, 0.2);
}

.editor-view .actor-element.selected {
  border-width: 3px;
  box-shadow: 0 0 10px var(--color-actor);
}

.editor-view .hotspot-element {
  border-color: var(--color-hotspot);
  background: rgba(0, 212, 255, 0.15);
  border-style: dotted;
}

.editor-view .hotspot-element.selected {
  border-width: 3px;
  box-shadow: 0 0 10px var(--color-hotspot);
}

.editor-view .image-element {
  border-color: var(--color-image);
  background: rgba(244, 114, 182, 0.2);
}

.editor-view .image-element.selected {
  border-width: 3px;
  box-shadow: 0 0 10px var(--color-image);
}

.editor-view .image-element.has-parallax {
  border-style: dashed;
  border-color: #88ff88;
}

.editor-view .image-element.has-parallax.selected {
  box-shadow: 0 0 10px #88ff88;
}

.editor-view .parallax-indicator {
  position: absolute;
  top: 2px;
  right: 2px;
  background: rgba(0, 200, 0, 0.8);
  color: white;
  font-size: 8px;
  padding: 2px 4px;
  border-radius: 3px;
  pointer-events: none;
  font-family: monospace;
}

/* Parallax depth hints in properties panel */
.editor-view .parallax-depth-control {
  display: flex;
  align-items: center;
  gap: 8px;
}

.editor-view .parallax-depth-control .property-range {
  flex: 1;
}

.editor-view .depth-hints {
  display: flex;
  justify-content: space-between;
  margin-top: 4px;
  font-size: 9px;
}

.editor-view .depth-hints .hint-item {
  color: var(--text-muted);
  opacity: 0.5;
  transition: opacity 0.2s;
}

.editor-view .depth-hints .hint-item.active {
  opacity: 1;
  color: #88ff88;
}

.editor-view .zplane-element {
  border-color: var(--color-zplane);
  background: rgba(100, 116, 139, 0.2);
  border-style: double;
  border-width: 4px;
}

.editor-view .zplane-element.selected {
  box-shadow: 0 0 10px var(--color-zplane);
}

/* Light elements */
.editor-view .light-element {
  border-color: #ffcc00;
  background: rgba(255, 204, 0, 0.1);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}

.editor-view .light-element.selected {
  border-width: 3px;
  box-shadow: 0 0 15px #ffcc00;
}

.editor-view .light-element.disabled {
  opacity: 0.4;
}

.editor-view .light-icon {
  font-size: 20px;
  pointer-events: none;
  z-index: 2;
}

.editor-view .light-preview-glow {
  position: absolute;
  border-radius: 50%;
  z-index: 1;
}

.editor-view .lighting-overlay {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 50;
}

/* Particle elements */
.editor-view .particle-element {
  border-color: #ff88ff;
  background: rgba(255, 136, 255, 0.15);
  border-style: dashed;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor-view .particle-element.selected {
  border-width: 3px;
  box-shadow: 0 0 10px #ff88ff;
}

.editor-view .particle-element.disabled {
  opacity: 0.4;
}

.editor-view .particles-container {
  position: absolute;
  pointer-events: none;
  z-index: 45;
}

.editor-view .particle {
  position: absolute;
  pointer-events: none;
}

/* Light color preview in panel */
.editor-view .light-color-preview {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  margin-left: auto;
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 0 5px currentColor;
}

/* Ambient light settings */
.editor-view .ambient-light-settings {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
  margin-bottom: 8px;
}

.editor-view .ambient-light-settings label {
  font-size: 10px;
  color: var(--text-secondary);
}

.editor-view .ambient-color {
  width: 24px;
  height: 24px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.editor-view .ambient-intensity {
  flex: 1;
  height: 4px;
}

.editor-view .intensity-value {
  font-size: 10px;
  color: var(--text-secondary);
  min-width: 24px;
}

/* Text colors for panel */
.editor-view .text-light {
  color: #ffcc00;
}

.editor-view .text-particle {
  color: #ff88ff;
}

.editor-view .element-rect:hover {
  filter: brightness(1.2);
}

.editor-view .element-label {
  font-size: 8px;
  color: white;
  background: rgba(0, 0, 0, 0.7);
  padding: 2px 4px;
  white-space: nowrap;
  pointer-events: none;
}

/* Resize handles */
.editor-view .resize-handle {
  position: absolute;
  width: 10px;
  height: 10px;
  background: var(--primary);
  border: 2px solid var(--bg-dark);
  pointer-events: all;
  z-index: 10;
}

.resize-handle.nw { top: -5px; left: -5px; cursor: nwse-resize; }
.resize-handle.n { top: -5px; left: 50%; transform: translateX(-50%); cursor: ns-resize; }
.resize-handle.ne { top: -5px; right: -5px; cursor: nesw-resize; }
.resize-handle.e { top: 50%; right: -5px; transform: translateY(-50%); cursor: ew-resize; }
.resize-handle.se { bottom: -5px; right: -5px; cursor: nwse-resize; }
.resize-handle.s { bottom: -5px; left: 50%; transform: translateX(-50%); cursor: ns-resize; }
.resize-handle.sw { bottom: -5px; left: -5px; cursor: nesw-resize; }
.resize-handle.w { top: 50%; left: -5px; transform: translateY(-50%); cursor: ew-resize; }

.editor-view .resize-handle:hover {
  background: var(--accent);
  transform: scale(1.2);
}

.editor-view .resize-handle.n:hover,
.editor-view .resize-handle.s:hover {
  transform: translateX(-50%) scale(1.2);
}

.editor-view .resize-handle.e:hover,
.editor-view .resize-handle.w:hover {
  transform: translateY(-50%) scale(1.2);
}

/* Rotate handle */
.editor-view .rotate-handle {
  position: absolute;
  width: 12px;
  height: 12px;
  background: var(--accent);
  border: 2px solid var(--bg-dark);
  border-radius: 50%;
  top: -30px;
  left: 50%;
  transform: translateX(-50%);
  cursor: grab;
  pointer-events: all;
  z-index: 11;
}

.editor-view .rotate-handle:hover {
  background: var(--primary);
  transform: translateX(-50%) scale(1.2);
}

.editor-view .rotate-handle:active {
  cursor: grabbing;
}

.editor-view .rotate-line {
  position: absolute;
  width: 2px;
  height: 25px;
  background: var(--accent);
  top: -25px;
  left: 50%;
  transform: translateX(-50%);
  pointer-events: none;
  z-index: 10;
}

/* Dragging state */
.editor-view .canvas-wrapper.dragging {
  cursor: grabbing;
}

.editor-view .canvas-wrapper.dragging .element-rect {
  cursor: grabbing;
}

.editor-view .element-rect {
  cursor: grab;
  transition: box-shadow 0.15s ease, filter 0.15s ease;
}

.editor-view .element-rect.selected {
  cursor: grab;
}

/* Zoom controls */
.editor-view .zoom-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-md);
  padding: var(--space-sm);
  background: var(--bg-medium);
  border-top: 2px solid var(--bg-light);
}

.editor-view .zoom-btn {
  background: var(--bg-light);
  border: none;
  color: var(--text-primary);
  width: 28px;
  height: 28px;
  cursor: pointer;
  font-size: 16px;
}

.editor-view .zoom-btn:hover {
  background: var(--primary);
  color: var(--bg-dark);
}

.editor-view .zoom-btn.fit-btn {
  width: auto;
  padding: 0 8px;
  font-size: 10px;
  font-family: 'Press Start 2P', monospace;
}

.editor-view .zoom-btn.grid-btn {
  margin-left: var(--space-md);
  font-size: 14px;
}

.editor-view .zoom-btn.grid-btn.active {
  background: var(--primary);
  color: var(--bg-dark);
}

.editor-view .zoom-level {
  color: var(--text-secondary);
  min-width: 60px;
  text-align: center;
}

/* Properties panel */
.editor-view .no-selection {
  padding: var(--space-lg);
  text-align: center;
}

.editor-view .properties-form {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.editor-view .property-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.editor-view .property-label {
  font-size: 10px;
  color: var(--text-secondary);
}

.editor-view .property-input {
  background: var(--bg-dark);
  border: 2px solid var(--bg-light);
  color: var(--text-primary);
  padding: var(--space-sm);
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
}

.editor-view .property-input:focus {
  outline: none;
  border-color: var(--accent);
}

.editor-view .property-input:disabled {
  color: var(--text-muted);
}

.editor-view .property-row {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
}

.editor-view .property-unit {
  color: var(--text-muted);
  font-size: 10px;
}

.editor-view .property-checkboxes {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.editor-view .checkbox-label {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  font-size: 10px;
  color: var(--text-secondary);
  cursor: pointer;
}

.editor-view .checkbox-label input[type="checkbox"] {
  width: 14px;
  height: 14px;
  accent-color: var(--accent);
  cursor: pointer;
}

.editor-view .checkbox-label:hover {
  color: var(--text-primary);
}

.editor-view .property-input.small {
  width: 50%;
}

.editor-view .property-input.tiny {
  width: 60px;
  padding: var(--space-xs);
  font-size: 9px;
}

.editor-view .property-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: var(--space-sm);
  margin-bottom: var(--space-sm);
  border-bottom: 2px solid var(--bg-light);
}

.editor-view .property-type {
  font-size: 12px;
  color: var(--primary);
}

.editor-view .delete-element-btn {
  background: var(--error);
  border: none;
  color: white;
  padding: var(--space-xs) var(--space-sm);
  cursor: pointer;
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  transition: all var(--transition-fast);
}

.editor-view .delete-element-btn:hover {
  background: #ff1a1a;
  transform: scale(1.05);
}

/* Multi-selection styles */
.editor-view .multi-selection-info {
  margin-top: var(--space-md);
}

.editor-view .selection-list {
  list-style: none;
  padding: 0;
  margin: var(--space-sm) 0 0 0;
  max-height: 200px;
  overflow-y: auto;
}

.editor-view .selection-item {
  display: flex;
  gap: var(--space-sm);
  padding: var(--space-xs) var(--space-sm);
  background: var(--bg-light);
  margin-bottom: 2px;
  font-size: 9px;
}

.editor-view .selection-item .item-type {
  color: var(--accent);
  text-transform: uppercase;
  min-width: 60px;
}

.editor-view .selection-item .item-name {
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.editor-view .walkbox-points {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.editor-view .point-row {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.editor-view .point-label {
  font-size: 9px;
  color: var(--text-muted);
  width: 25px;
}

/* Status bar */
.editor-view .editor-status-bar {
  display: flex;
  gap: var(--space-lg);
  padding: var(--space-xs) var(--space-md);
  background: var(--bg-medium);
  border-top: 2px solid var(--bg-light);
  font-size: 10px;
  color: var(--text-muted);
}

.editor-view .status-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.editor-view .status-item.status-right {
  margin-left: auto;
}

.editor-view .status-item.dragging-indicator {
  color: var(--primary);
  animation: pixel-pulse 0.5s ease-in-out infinite;
}

/* Header separator and undo/redo */
.editor-view .header-separator {
  color: var(--text-muted);
  font-size: 14px;
}

.editor-view .undo-btn:disabled,
.editor-view .redo-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.editor-view .undo-btn:disabled:hover,
.editor-view .redo-btn:disabled:hover {
  background: var(--bg-light);
  color: var(--text-primary);
}

/* Section divider */
.editor-view .section-divider {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-md) var(--space-sm);
  margin: var(--space-sm) 0;
  border-top: 2px solid var(--bg-light);
  border-bottom: 2px solid var(--bg-light);
}

.editor-view .divider-text {
  font-size: 8px;
  color: var(--text-muted);
  letter-spacing: 1px;
}

/* Data element type colors */
.text-dialog { color: #f59e0b; }
.text-puzzle { color: #8b5cf6; }
.text-verb { color: #ef4444; }
.text-sfx { color: #22c55e; }
.text-music { color: #ec4899; }
.text-cutscene { color: #06b6d4; }

/* Cutscene Actions Editor */
.editor-view .actions-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  max-height: 300px;
  overflow-y: auto;
  padding: var(--space-xs);
  background: var(--bg-dark);
  border-radius: 4px;
}

.editor-view .action-item {
  background: var(--bg-medium);
  border: 1px solid var(--bg-light);
  border-radius: 4px;
  padding: var(--space-xs);
}

.editor-view .action-header {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  margin-bottom: var(--space-xs);
}

.editor-view .action-index {
  color: var(--text-muted);
  font-size: 8px;
  min-width: 24px;
}

.editor-view .action-type {
  color: #06b6d4;
  font-size: 8px;
  flex: 1;
  text-transform: uppercase;
}

.editor-view .action-controls {
  display: flex;
  gap: 2px;
}

.editor-view .action-btn {
  background: var(--bg-light);
  border: 1px solid var(--bg-card);
  color: var(--text-secondary);
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 10px;
  padding: 0;
  transition: all var(--transition-fast);
}

.editor-view .action-btn:hover:not(:disabled) {
  background: var(--accent);
  color: var(--bg-dark);
}

.editor-view .action-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.editor-view .action-btn-delete:hover:not(:disabled) {
  background: var(--error);
}

.editor-view .action-params {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.editor-view .action-row {
  display: flex;
  gap: var(--space-xs);
}

.editor-view .property-select-sm,
.editor-view .property-input-sm {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  padding: var(--space-xs);
  background: var(--bg-dark);
  border: 1px solid var(--bg-light);
  color: var(--text-primary);
  width: 100%;
}

.editor-view .property-input-xs {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  padding: var(--space-xs);
  background: var(--bg-dark);
  border: 1px solid var(--bg-light);
  color: var(--text-primary);
  width: 60px;
}

.editor-view .property-textarea-sm {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  padding: var(--space-xs);
  background: var(--bg-dark);
  border: 1px solid var(--bg-light);
  color: var(--text-primary);
  width: 100%;
  resize: vertical;
  min-height: 40px;
}

.editor-view .property-label-sm {
  font-size: 8px;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.editor-view .property-color {
  width: 30px;
  height: 24px;
  padding: 0;
  border: 1px solid var(--bg-light);
  cursor: pointer;
}

.editor-view .empty-actions {
  color: var(--text-muted);
  font-size: 8px;
  text-align: center;
  padding: var(--space-sm);
}

.editor-view .property-divider {
  border-top: 1px solid var(--bg-light);
  margin: var(--space-sm) 0;
  padding-top: var(--space-sm);
  color: var(--text-muted);
  font-size: 8px;
  text-transform: uppercase;
}

/* Dialog editor */
.editor-view .dialog-lines {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  max-height: 150px;
  overflow-y: auto;
}

.editor-view .dialog-line {
  display: flex;
  gap: var(--space-xs);
}

.editor-view .add-line-btn {
  background: var(--bg-light);
  border: 1px dashed var(--text-muted);
  color: var(--text-muted);
  padding: var(--space-xs) var(--space-sm);
  cursor: pointer;
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  margin-top: var(--space-xs);
  transition: all var(--transition-fast);
}

.editor-view .add-line-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

/* Dialog Actor Preview */
.editor-view .dialog-actor-preview {
  display: flex;
  justify-content: center;
  padding: var(--space-sm);
  background: var(--bg-dark);
  border-radius: 4px;
}

.editor-view .actor-preview-box {
  width: 64px;
  height: 64px;
  background: var(--bg-medium);
  border: 2px solid var(--actor);
  display: flex;
  align-items: center;
  justify-content: center;
  image-rendering: pixelated;
}

.editor-view .actor-preview-name {
  font-size: 6px;
  color: var(--actor);
  text-align: center;
  padding: 2px;
}

/* Dialog Choices */
.editor-view .dialog-choices {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  max-height: 120px;
  overflow-y: auto;
}

.editor-view .dialog-choice {
  display: flex;
  gap: var(--space-xs);
  align-items: center;
}

/* Remove line/choice button */
.editor-view .remove-line-btn {
  background: transparent;
  border: 1px solid var(--error);
  color: var(--error);
  width: 20px;
  height: 20px;
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  flex-shrink: 0;
  transition: all var(--transition-fast);
}

.editor-view .remove-line-btn:hover {
  background: var(--error);
  color: white;
}

/* Property textarea */
.editor-view .property-textarea {
  min-height: 60px;
  resize: vertical;
  font-family: 'Press Start 2P', monospace;
}

/* Property slider */
.editor-view .property-slider {
  width: 100%;
  height: 20px;
  -webkit-appearance: none;
  background: var(--bg-dark);
  border: 2px solid var(--bg-light);
  cursor: pointer;
}

.editor-view .property-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  background: var(--primary);
  border: none;
  cursor: pointer;
}

.editor-view .property-slider::-moz-range-thumb {
  width: 16px;
  height: 16px;
  background: var(--primary);
  border: none;
  cursor: pointer;
}

/* Checkbox styling */
.editor-view .property-label input[type="checkbox"] {
  margin-right: var(--space-sm);
  transform: scale(1.2);
}

/* ===================== */
/* INTERACTIONS PANEL    */
/* ===================== */
.editor-view .property-divider {
  border-top: 2px dashed var(--bg-light);
  margin: var(--space-md) 0;
}

.editor-view .interactions-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.editor-view .interaction-item {
  background: var(--bg-dark);
  border: 2px solid var(--bg-light);
  padding: var(--space-sm);
  border-radius: 4px;
}

.editor-view .interaction-header {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
  margin-bottom: var(--space-sm);
}

.editor-view .interaction-header .property-select {
  flex: 1;
}

.editor-view .interaction-config {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.editor-view .interaction-config .property-select,
.editor-view .interaction-config .property-input,
.editor-view .interaction-config .property-textarea {
  font-size: 10px;
}

.editor-view .interaction-condition {
  margin-top: var(--space-xs);
  padding-top: var(--space-xs);
  border-top: 1px solid var(--bg-light);
}

.editor-view .condition-row {
  display: flex;
  gap: var(--space-xs);
  align-items: center;
  margin-top: var(--space-xs);
}

.editor-view .btn-add-small {
  background: var(--success);
  color: var(--bg-dark);
  border: none;
  padding: 2px 6px;
  font-size: 10px;
  font-family: 'Press Start 2P', monospace;
  cursor: pointer;
  margin-left: var(--space-sm);
}

.editor-view .btn-add-small:hover {
  filter: brightness(1.2);
}

.editor-view .btn-remove-small {
  background: var(--error);
  color: white;
  border: none;
  width: 20px;
  height: 20px;
  font-size: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor-view .btn-remove-small:hover {
  filter: brightness(1.2);
}

.editor-view .property-select.small {
  font-size: 10px;
  padding: 4px;
}

.editor-view .property-select.tiny {
  font-size: 10px;
  padding: 2px 4px;
  width: auto;
  min-width: 50px;
}

.editor-view .property-input.small {
  font-size: 10px;
  padding: 4px;
  width: 80px;
}

.editor-view .property-textarea.code {
  font-family: monospace;
  font-size: 11px;
}

.editor-view .checkbox-label.small {
  font-size: 9px;
}

.editor-view .checkbox-label.small input[type="checkbox"] {
  transform: scale(1);
}

.editor-view .hint-text {
  color: var(--text-muted);
  margin-top: var(--space-xs);
}

.editor-view .pixel-font-xs {
  font-size: 8px;
}

/* ===================== */
/* SPRITESHEET EDITOR    */
/* ===================== */
.editor-view .spritesheet-editor-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.85);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor-view .spritesheet-editor-modal {
  width: 95%;
  max-width: 1600px;
  height: 90vh;
  background: var(--bg-medium);
  border: 4px solid var(--primary);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.editor-view .spritesheet-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md);
  background: var(--bg-dark);
  border-bottom: 2px solid var(--primary);
}

.editor-view .spritesheet-title {
  font-family: 'Press Start 2P', monospace;
  font-size: 14px;
  color: var(--primary);
  margin: 0;
}

.editor-view .spritesheet-close-btn {
  background: transparent;
  border: 2px solid var(--error);
  color: var(--error);
  width: 32px;
  height: 32px;
  cursor: pointer;
  font-size: 16px;
  transition: all var(--transition-fast);
}

.editor-view .spritesheet-close-btn:hover {
  background: var(--error);
  color: white;
}

.editor-view .spritesheet-main {
  flex: 1;
  display: flex;
  overflow: hidden;
}

.editor-view .spritesheet-canvas-area {
  flex: 1;
  overflow: auto;
  background: var(--bg-dark);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  position: relative;
  min-width: 0; /* Allow shrinking */
}

.editor-view .spritesheet-dropzone {
  width: calc(100% - 2 * var(--space-lg));
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: 4px dashed var(--text-muted);
  margin: var(--space-lg);
  margin-top: 60px;
  transition: all var(--transition-fast);
}

.editor-view .spritesheet-dropzone:hover {
  border-color: var(--accent);
  background: rgba(0, 212, 255, 0.05);
}

.editor-view .dropzone-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-md);
}

.editor-view .dropzone-icon {
  font-size: 48px;
}

.editor-view .dropzone-text {
  font-family: 'Press Start 2P', monospace;
  font-size: 12px;
  color: var(--text-primary);
}

.editor-view .dropzone-subtext {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
}

.editor-view .spritesheet-grid-container {
  padding: var(--space-lg);
  overflow: auto;
  max-height: 100%;
  max-width: 100%;
  display: flex;
  align-items: flex-start;
  justify-content: center;
}

.editor-view .spritesheet-grid {
  position: relative;
  background-size: 100% 100%;  /* Exact size, no scaling */
  background-repeat: no-repeat;
  image-rendering: pixelated;
}

.editor-view .frame-cell {
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.3);
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  align-items: flex-end;
  justify-content: flex-end;
  padding: 2px;
}

.editor-view .frame-cell:hover {
  background: rgba(0, 212, 255, 0.3);
  border-color: var(--accent);
}

.editor-view .frame-cell.selected {
  background: rgba(201, 162, 39, 0.4);
  border: 2px solid var(--primary);
}

.editor-view .frame-number {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: white;
  background: rgba(0, 0, 0, 0.7);
  padding: 1px 3px;
}

.editor-view .spritesheet-panel {
  width: 280px;
  background: var(--bg-light);
  border-left: 2px solid var(--primary);
  overflow-y: auto;
  flex-shrink: 0;
}

.editor-view .spritesheet-section {
  padding: var(--space-md);
  border-bottom: 1px solid var(--bg-dark);
}

.editor-view .spritesheet-section-title {
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  color: var(--accent);
  margin: 0 0 var(--space-md) 0;
}

.editor-view .spritesheet-form-row {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-bottom: var(--space-sm);
}

.editor-view .spritesheet-form-row label {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-secondary);
  min-width: 60px;
}

.editor-view .spritesheet-input {
  flex: 1;
  background: var(--bg-dark);
  border: 2px solid var(--bg-medium);
  color: var(--text-primary);
  padding: var(--space-xs) var(--space-sm);
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
}

.editor-view .spritesheet-input:focus {
  outline: none;
  border-color: var(--accent);
}

.editor-view .spritesheet-info {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
  margin-bottom: var(--space-sm);
}

.editor-view .spritesheet-btn-row {
  display: flex;
  gap: var(--space-sm);
  margin-bottom: var(--space-sm);
}

.editor-view .spritesheet-btn {
  flex: 1;
  background: var(--bg-dark);
  border: 2px solid var(--bg-medium);
  color: var(--text-primary);
  padding: var(--space-sm);
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.editor-view .spritesheet-btn:hover:not(:disabled) {
  border-color: var(--accent);
  color: var(--accent);
}

.editor-view .spritesheet-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.editor-view .spritesheet-btn-primary {
  background: var(--primary);
  border-color: var(--primary);
  color: var(--bg-dark);
  width: 100%;
}

.editor-view .spritesheet-btn-primary:hover:not(:disabled) {
  background: var(--accent);
  border-color: var(--accent);
}

.editor-view .spritesheet-btn-success {
  background: var(--success);
  border-color: var(--success);
  color: var(--bg-dark);
  width: 100%;
}

.editor-view .spritesheet-btn-success:hover:not(:disabled) {
  filter: brightness(1.2);
}

.editor-view .spritesheet-btn-mini {
  width: 24px;
  height: 24px;
  padding: 0;
  background: var(--bg-medium);
  border: 2px solid var(--border-color);
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all var(--transition-fast);
}

.editor-view .spritesheet-btn-mini:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: var(--bg-dark);
}

.editor-view .spritesheet-info-dims {
  font-size: 8px;
  color: var(--text-muted);
  margin-top: var(--space-sm);
  padding: var(--space-xs) var(--space-sm);
  background: var(--bg-dark);
  border-radius: 2px;
  text-align: center;
}

.editor-view .spritesheet-info-dims .size-mismatch {
  color: #ffaa00;
  font-weight: bold;
}

.editor-view .spritesheet-btn-warning {
  background: linear-gradient(180deg, #ffaa00, #ff8800) !important;
  color: #000 !important;
  font-weight: bold;
}

.editor-view .spritesheet-details {
  margin-top: var(--space-sm);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  overflow: hidden;
}

.editor-view .spritesheet-details summary {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-secondary);
  padding: var(--space-sm);
  background: var(--bg-dark);
  cursor: pointer;
  user-select: none;
}

.editor-view .spritesheet-details summary:hover {
  color: var(--accent);
}

.editor-view .spritesheet-details[open] summary {
  border-bottom: 1px solid var(--border-color);
}

.editor-view .spritesheet-details .spritesheet-form-row {
  padding: var(--space-xs) var(--space-sm);
}

.editor-view .spritesheet-checkbox-row {
  display: flex;
  gap: var(--space-md);
  margin-bottom: var(--space-md);
}

.editor-view .spritesheet-checkbox-row label {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  cursor: pointer;
}

.editor-view .spritesheet-checkbox-row input[type="checkbox"] {
  accent-color: var(--accent);
}

.editor-view .spritesheet-anim-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.editor-view .spritesheet-anim-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-xs) var(--space-sm);
  background: var(--bg-dark);
}

.editor-view .spritesheet-anim-item-extended {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: var(--space-sm);
  background: var(--bg-dark);
  border-radius: 4px;
  margin-bottom: 4px;
  transition: all 0.2s ease;
}

.editor-view .spritesheet-anim-item-extended:hover {
  background: var(--bg-medium);
}

.editor-view .spritesheet-anim-item-extended.editing {
  background: rgba(0, 212, 255, 0.15);
  border: 1px solid var(--accent);
}

.editor-view .spritesheet-anim-main {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  width: 100%;
}

.editor-view .anim-actions {
  display: flex;
  gap: 4px;
  margin-left: auto;
}

.editor-view .anim-action-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 12px;
  padding: 2px 4px;
  opacity: 0.6;
  transition: opacity 0.2s, transform 0.2s;
}

.editor-view .anim-action-btn:hover {
  opacity: 1;
  transform: scale(1.1);
}

.editor-view .anim-action-btn.delete:hover {
  opacity: 1;
}

.editor-view .editing-hint {
  font-size: 9px;
  color: var(--accent);
  margin-top: 4px;
  font-style: italic;
}

.editor-view .spritesheet-anim-usage {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding-left: 4px;
}

.editor-view .spritesheet-usage-tag {
  font-size: 8px;
  padding: 2px 6px;
  background: rgba(0, 212, 255, 0.2);
  color: var(--accent);
  border-radius: 3px;
  border: 1px solid rgba(0, 212, 255, 0.3);
  font-family: 'Press Start 2P', monospace;
}

.editor-view .spritesheet-usage-tag.unused {
  background: rgba(100, 100, 100, 0.2);
  color: #666;
  border-color: rgba(100, 100, 100, 0.3);
  font-style: italic;
}

.editor-view .anim-name {
  flex: 1;
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.editor-view .anim-frames {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
}

.editor-view .anim-delete-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 12px;
  padding: 2px;
  opacity: 0.6;
  transition: opacity var(--transition-fast);
}

.editor-view .anim-delete-btn:hover {
  opacity: 1;
}

.editor-view .spritesheet-empty {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
  text-align: center;
  padding: var(--space-md);
}

.editor-view .spritesheet-footer {
  background: var(--bg-dark);
  border-top: 2px solid var(--primary);
  padding: var(--space-md);
  display: flex;
  align-items: center;
  gap: var(--space-lg);
}

.editor-view .preview-controls {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  flex: 1;
}

.editor-view .preview-btn {
  width: 40px;
  height: 40px;
  background: var(--primary);
  border: none;
  color: var(--bg-dark);
  font-size: 16px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.editor-view .preview-btn:hover {
  background: var(--accent);
}

.editor-view .preview-info {
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  color: var(--text-primary);
  min-width: 120px;
}

.editor-view .preview-progress {
  flex: 1;
  height: 8px;
  background: var(--bg-medium);
  border: 1px solid var(--bg-light);
}

.editor-view .preview-progress-bar {
  height: 100%;
  background: var(--primary);
  transition: width 0.1s linear;
}

.editor-view .preview-canvas-container {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-md);
  background: repeating-conic-gradient(#333 0% 25%, #444 0% 50%) 50% / 16px 16px;
  border: 2px solid var(--bg-light);
  min-width: 128px;
  min-height: 128px;
  position: relative;
  overflow: visible;
}

.editor-view .preview-frame-canvas {
  display: block;
  box-sizing: border-box;
}

/* Spritesheet Source Tabs */
.editor-view .spritesheet-source-tabs {
  display: flex;
  gap: 4px;
  padding: var(--space-md);
  background: var(--bg-medium);
  border-bottom: 1px solid var(--border-color);
  width: 100%;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1;
}

.editor-view .source-tab {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  padding: 8px 16px;
  background: var(--bg-dark);
  border: 2px solid var(--border-color);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.editor-view .source-tab:hover {
  border-color: var(--accent);
  color: var(--accent);
}

.editor-view .source-tab.active {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--bg-dark);
}

/* Asset Picker in Spritesheet Editor */
.editor-view .spritesheet-asset-picker {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
  padding: var(--space-lg);
  padding-top: 60px;
  width: 100%;
  height: 100%;
  overflow-y: auto;
}

.editor-view .asset-picker-hint {
  font-family: 'Press Start 2P', monospace;
  font-size: 9px;
  color: var(--text-muted);
  text-align: center;
}

.editor-view .asset-picker-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: var(--space-md);
  padding: var(--space-md);
}

.editor-view .asset-picker-item {
  background: var(--bg-medium);
  border: 2px solid var(--border-color);
  padding: var(--space-sm);
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.editor-view .asset-picker-item:hover {
  border-color: var(--accent);
  transform: translateY(-2px);
}

.editor-view .asset-picker-item.selected {
  border-color: var(--primary);
  background: rgba(201, 162, 39, 0.1);
}

.editor-view .asset-picker-preview {
  width: 80px;
  height: 80px;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  background-color: var(--bg-dark);
  image-rendering: pixelated;
}

.editor-view .asset-picker-name {
  font-family: 'Press Start 2P', monospace;
  font-size: 7px;
  color: var(--text-primary);
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  width: 100%;
}

.editor-view .asset-picker-size {
  font-family: 'Press Start 2P', monospace;
  font-size: 6px;
  color: var(--text-muted);
}

.editor-view .asset-picker-empty {
  font-family: 'Press Start 2P', monospace;
  font-size: 9px;
  color: var(--text-muted);
  text-align: center;
  padding: var(--space-xl);
}

/* Assign to Actor Modal */
.editor-view .assign-actor-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 1100;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor-view .assign-actor-modal {
  background: var(--bg-medium);
  border: 4px solid var(--primary);
  padding: var(--space-lg);
  max-width: 500px;
  width: 90%;
  max-height: 70vh;
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.editor-view .assign-actor-title {
  font-family: 'Press Start 2P', monospace;
  font-size: 12px;
  color: var(--primary);
  text-align: center;
  margin: 0;
}

.editor-view .assign-actor-hint {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
  text-align: center;
}

.editor-view .assign-actor-content {
  flex: 1;
  overflow-y: auto;
}

.editor-view .assign-actor-actors h4 {
  font-family: 'Press Start 2P', monospace;
  font-size: 9px;
  color: var(--text-secondary);
  margin: 0 0 var(--space-sm) 0;
}

.editor-view .assign-actor-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-sm);
  background: var(--bg-dark);
  border: 1px solid var(--border-color);
  margin-bottom: var(--space-xs);
}

.editor-view .assign-actor-item .actor-name {
  font-family: 'Press Start 2P', monospace;
  font-size: 9px;
  color: var(--text-primary);
}

.editor-view .actor-states {
  display: flex;
  gap: 4px;
}

.editor-view .state-btn {
  position: relative;
  width: 28px;
  height: 28px;
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  cursor: pointer;
  font-size: 14px;
  transition: all 0.15s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor-view .state-btn:hover {
  border-color: var(--accent);
  background: rgba(0, 212, 255, 0.2);
}

.editor-view .state-btn.assigned {
  background: rgba(0, 255, 136, 0.2);
  border-color: var(--success);
}

.editor-view .no-actors-hint {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
  text-align: center;
  padding: var(--space-lg);
}

.editor-view .mirror-mode-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: var(--space-sm);
  margin-bottom: var(--space-sm);
  background: var(--bg-dark);
  border: 2px solid var(--border-color);
  cursor: pointer;
}

.editor-view .mirror-mode-toggle:has(input:checked) {
  border-color: var(--accent);
  background: rgba(0, 212, 255, 0.1);
}

.editor-view .mirror-mode-toggle input {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.editor-view .mirror-label {
  font-size: 9px;
  color: var(--text-secondary);
}

.editor-view .state-btn .mirror-indicator {
  font-size: 8px;
  position: absolute;
  top: -2px;
  right: -2px;
}

.editor-view .state-btn.mirrored {
  border-color: var(--accent);
  background: rgba(0, 212, 255, 0.2);
}

.editor-view .assign-actor-actions {
  display: flex;
  justify-content: center;
  padding-top: var(--space-sm);
  border-top: 1px solid var(--border-color);
}

.editor-view .assign-skip-btn {
  font-family: 'Press Start 2P', monospace;
  font-size: 9px;
  padding: 8px 16px;
  background: var(--bg-dark);
  border: 2px solid var(--border-color);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.editor-view .assign-skip-btn:hover {
  border-color: var(--text-secondary);
  color: var(--text-primary);
}

/* Animation color */
.editor-view .text-animation {
  color: #ff9f43;
}

/* Actor Animation Preview */
.editor-view .actor-animation-preview {
  position: absolute;
  inset: 0;
  image-rendering: pixelated;
  background-repeat: no-repeat;
  pointer-events: none;
}

.editor-view .actor-name-overlay {
  position: absolute;
  bottom: 2px;
  left: 2px;
  font-size: 8px;
  color: white;
  background: rgba(0, 0, 0, 0.7);
  padding: 1px 3px;
  pointer-events: none;
}

/* Actor Animations Config in Properties Panel */
.editor-view .actor-animations-config {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.editor-view .animation-preview-state {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding-bottom: var(--space-sm);
  border-bottom: 1px solid var(--bg-dark);
  margin-bottom: var(--space-xs);
}

.editor-view .animation-label {
  font-size: 8px;
  color: var(--text-muted);
}

.editor-view .animation-assignments {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.editor-view .animation-assignment-row {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.editor-view .animation-state-name {
  font-family: 'Press Start 2P', monospace;
  font-size: 7px;
  color: var(--text-secondary);
  min-width: 70px;
  text-transform: capitalize;
}

.editor-view .animation-assignment-row .property-select-sm {
  flex: 1;
  font-size: 7px;
  padding: 2px 4px;
}

/* ===================== */
/* PUZZLE SYSTEM STYLES  */
/* ===================== */

/* Property Section */
.editor-view .property-section {
  background: var(--bg-dark);
  border-radius: 4px;
  padding: var(--space-sm);
  margin-top: var(--space-sm);
}

.editor-view .property-section-title {
  font-family: 'Press Start 2P', monospace;
  font-size: 9px;
  color: var(--primary);
  margin-bottom: var(--space-sm);
  display: block;
  text-transform: uppercase;
}

/* Condition Items List */
.editor-view .condition-items-list,
.editor-view .remove-items-list,
.editor-view .sequence-steps-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  margin-bottom: var(--space-xs);
}

.editor-view .condition-item-row,
.editor-view .sequence-step-row {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.editor-view .step-number {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--accent);
  min-width: 20px;
}

/* Hints Section */
.editor-view .hints-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  margin-bottom: var(--space-xs);
}

.editor-view .hint-row {
  background: var(--bg-medium);
  padding: var(--space-xs);
  border-radius: 4px;
}

.editor-view .hint-header {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  margin-bottom: var(--space-xs);
  font-size: 8px;
  color: var(--text-secondary);
}

.editor-view .hint-header .property-input.tiny {
  width: 40px;
}

/* Choices Checklist */
.editor-view .choices-checklist {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.editor-view .choice-checkbox {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: 8px;
  color: var(--text-secondary);
  cursor: pointer;
}

.editor-view .choice-checkbox input[type="checkbox"] {
  cursor: pointer;
}

.editor-view .property-hint {
  font-size: 7px;
  color: var(--text-muted);
  margin-bottom: var(--space-xs);
}

/* Item Properties */
.editor-view .use-with-checkboxes {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
}

.editor-view .use-with-checkboxes label {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 8px;
  color: var(--text-secondary);
  cursor: pointer;
}

.editor-view .action-btn {
  background: var(--primary);
  color: var(--bg-dark);
  border: none;
  padding: var(--space-xs) var(--space-sm);
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.editor-view .action-btn:hover {
  background: var(--accent);
}

/* Inventory Section */
.text-item { color: #f59e0b; }
.text-inventory { color: #8b5cf6; }

.editor-view .inventory-item {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.editor-view .remove-item-btn {
  background: transparent;
  border: 1px solid var(--error);
  color: var(--error);
  width: 16px;
  height: 16px;
  font-size: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  margin-left: auto;
  transition: all var(--transition-fast);
}

.editor-view .remove-item-btn:hover {
  background: var(--error);
  color: white;
}

/* Modal Styles */
.editor-view .modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.editor-view .modal-content {
  background: var(--bg-card);
  border: 4px solid var(--primary);
  border-radius: 8px;
  width: 90%;
  max-width: 400px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
}

.editor-view .small-modal {
  max-width: 350px;
}

.editor-view .modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-sm) var(--space-md);
  border-bottom: 2px solid var(--bg-dark);
}

.editor-view .modal-header h3 {
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  color: var(--primary);
  margin: 0;
}

.editor-view .modal-close-btn {
  background: transparent;
  border: none;
  color: var(--text-muted);
  font-size: 16px;
  cursor: pointer;
}

.editor-view .modal-close-btn:hover {
  color: var(--error);
}

.editor-view .modal-body {
  padding: var(--space-md);
  overflow-y: auto;
  flex: 1;
}

.editor-view .modal-footer {
  padding: var(--space-sm) var(--space-md);
  border-top: 2px solid var(--bg-dark);
  display: flex;
  justify-content: flex-end;
}

.editor-view .modal-btn {
  background: var(--primary);
  color: var(--bg-dark);
  border: none;
  padding: var(--space-xs) var(--space-md);
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  cursor: pointer;
}

.editor-view .modal-btn:hover {
  background: var(--accent);
}

/* Inventory Add List */
.editor-view .inventory-add-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.editor-view .inventory-add-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm);
  background: var(--bg-medium);
  border-radius: 4px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.editor-view .inventory-add-item:hover {
  background: var(--bg-light);
}

.editor-view .inventory-add-item.in-inventory {
  background: var(--bg-light);
  border: 1px solid var(--success);
}

.editor-view .inventory-add-item .item-icon {
  font-size: 16px;
}

.editor-view .inventory-add-item .item-name {
  flex: 1;
  font-size: 9px;
}

.editor-view .inventory-add-item .item-check {
  color: var(--success);
  font-size: 12px;
}

/* ===================== */
/* MULTI-SCENE STYLES    */
/* ===================== */

/* Scene Tabs */
.editor-view .scene-tabs {
  display: flex;
  gap: 2px;
  align-items: center;
  max-width: 600px;
  overflow-x: auto;
}

.editor-view .scene-tab {
  background: var(--bg-medium);
  border: 2px solid var(--bg-light);
  color: var(--text-secondary);
  padding: 4px 12px;
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  cursor: pointer;
  white-space: nowrap;
  transition: all var(--transition-fast);
}

.editor-view .scene-tab:hover {
  background: var(--bg-light);
  color: var(--text-primary);
}

.editor-view .scene-tab.active {
  background: var(--primary);
  border-color: var(--primary);
  color: var(--bg-dark);
}

.editor-view .add-scene-tab {
  background: transparent;
  border-style: dashed;
  color: var(--text-muted);
  font-size: 12px;
  padding: 4px 8px;
}

.editor-view .add-scene-tab:hover {
  border-color: var(--accent);
  color: var(--accent);
}

/* Global Data Separator */
.editor-view .section-separator {
  padding: 8px 12px;
  margin-top: 8px;
  border-top: 2px solid var(--primary);
  background: linear-gradient(to bottom, rgba(201, 162, 39, 0.1), transparent);
}

.editor-view .separator-label {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--primary);
  text-transform: uppercase;
}

/* Global Section Styling */
.editor-view .element-section.global-section .section-header {
  border-left: 3px solid var(--primary);
}

/* Place Actor Button */
.editor-view .place-actor-btn {
  background: transparent;
  border: 1px solid var(--accent);
  color: var(--accent);
  padding: 2px 4px;
  font-size: 10px;
  cursor: pointer;
  margin-left: auto;
  transition: all var(--transition-fast);
}

.editor-view .place-actor-btn:hover {
  background: var(--accent);
  color: var(--bg-dark);
}

.editor-view .place-actor-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* Modal Secondary Button */
.editor-view .modal-btn.secondary {
  background: var(--bg-light);
  color: var(--text-secondary);
  margin-right: 8px;
}

.editor-view .modal-btn.secondary:hover {
  background: var(--bg-medium);
}

/* Asset Management Styles */
.editor-view .asset-manager-modal {
  width: 800px;
  max-width: 90vw;
  max-height: 80vh;
}

.editor-view .asset-manager-body {
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: 60vh;
  overflow: hidden;
}

/* Category Selector */
.editor-view .asset-category-selector {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px;
  background: var(--bg-dark);
  border-radius: 4px;
  border: 1px solid var(--border-color);
}

.editor-view .category-label {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
  white-space: nowrap;
}

.editor-view .category-buttons {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.editor-view .category-btn {
  font-family: 'Press Start 2P', monospace;
  font-size: 7px;
  padding: 4px 8px;
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
  border-radius: 2px;
}

/* Asset Filter Bar */
.editor-view .asset-filter-bar {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px;
  background: var(--bg-dark);
  border-radius: 4px;
  border: 1px solid var(--border-color);
}

.editor-view .filter-tabs {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.editor-view .filter-tab {
  font-family: 'Press Start 2P', monospace;
  font-size: 6px;
  padding: 4px 6px;
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s;
  border-radius: 2px;
}

.editor-view .filter-tab:hover {
  border-color: var(--text-secondary);
  color: var(--text-secondary);
}

.editor-view .filter-tab.active {
  background: var(--primary);
  border-color: var(--primary);
  color: var(--bg-dark);
}

.editor-view .asset-search-input {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  padding: 6px 8px;
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  border-radius: 2px;
  width: 100%;
}

.editor-view .asset-search-input:focus {
  outline: none;
  border-color: var(--accent);
}

.editor-view .asset-search-input::placeholder {
  color: var(--text-muted);
}

.editor-view .category-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

.editor-view .category-btn.active {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--bg-dark);
}

.editor-view .asset-category-badge {
  font-size: 7px;
  padding: 1px 4px;
  background: var(--accent);
  color: var(--bg-dark);
  border-radius: 2px;
  text-transform: uppercase;
}

.editor-view .asset-meta {
  display: flex;
  align-items: center;
  gap: 6px;
}

.editor-view .asset-upload-zone {
  border: 2px dashed var(--border-color);
  border-radius: 4px;
  padding: 24px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  background: var(--bg-dark);
}

.editor-view .asset-upload-zone:hover,
.editor-view .asset-upload-zone.dragging {
  border-color: var(--accent);
  background: rgba(0, 212, 255, 0.05);
}

.editor-view .asset-upload-zone.uploading {
  border-color: var(--primary);
  background: rgba(201, 162, 39, 0.05);
  cursor: wait;
  pointer-events: none;
}

.editor-view .upload-zone-content.uploading .upload-icon {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.editor-view .upload-progress-bar {
  width: 100%;
  max-width: 200px;
  height: 8px;
  background: var(--bg-dark);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  overflow: hidden;
}

.editor-view .upload-progress-fill {
  height: 100%;
  background: var(--primary);
  transition: width 0.2s;
}

.editor-view .upload-zone-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.editor-view .upload-icon {
  font-size: 32px;
}

.editor-view .upload-text {
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  color: var(--text-primary);
}

.editor-view .upload-hint {
  font-size: 9px;
  color: var(--text-muted);
}

.editor-view .asset-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 12px;
  overflow-y: auto;
  flex: 1;
  padding: 4px;
}

.editor-view .asset-grid-item {
  background: var(--bg-dark);
  border: 2px solid var(--border-color);
  border-radius: 4px;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
}

.editor-view .asset-grid-item:hover {
  border-color: var(--primary);
}

.editor-view .asset-preview {
  width: 100%;
  height: 80px;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  background-color: var(--bg-medium);
  border-radius: 2px;
  image-rendering: pixelated;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor-view .asset-preview .asset-loading {
  font-size: 20px;
  animation: pulse 1s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

.editor-view .asset-preview .s3-badge {
  position: absolute;
  top: 2px;
  right: 2px;
  font-size: 10px;
  background: rgba(0, 0, 0, 0.6);
  padding: 2px 4px;
  border-radius: 2px;
}

.editor-view .asset-grid-item.s3-asset {
  border-color: var(--accent);
}

.editor-view .asset-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.editor-view .asset-name-input {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  padding: 4px;
  border-radius: 2px;
  width: 100%;
}

.editor-view .asset-name-input:focus {
  outline: none;
  border-color: var(--accent);
}

.editor-view .asset-size {
  font-size: 8px;
  color: var(--text-muted);
}

.editor-view .asset-delete-btn {
  position: absolute;
  top: 4px;
  right: 4px;
  background: var(--error);
  border: none;
  border-radius: 2px;
  padding: 2px 4px;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s;
  font-size: 10px;
}

.editor-view .asset-grid-item:hover .asset-delete-btn {
  opacity: 1;
}

.editor-view .asset-delete-btn:hover {
  background: #ff6b6b;
}

.editor-view .empty-assets {
  grid-column: 1 / -1;
  text-align: center;
  color: var(--text-muted);
  font-size: 9px;
  padding: 24px;
}

.editor-view .asset-count {
  font-size: 9px;
  color: var(--text-muted);
  margin-right: auto;
}

/* Asset Manager with Folders Layout */
.editor-view .asset-manager-with-folders {
  width: 1000px;
  max-width: 95vw;
}

.editor-view .asset-manager-body-with-sidebar {
  display: flex;
  gap: 16px;
  max-height: 65vh;
  overflow: hidden;
}

/* Folder Sidebar */
.editor-view .asset-folder-sidebar {
  width: 200px;
  min-width: 180px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  background: var(--bg-dark);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  overflow: hidden;
}

.editor-view .folder-sidebar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 10px;
  background: var(--bg-medium);
  border-bottom: 1px solid var(--border-color);
}

.editor-view .folder-sidebar-title {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-secondary);
}

.editor-view .folder-add-btn {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--accent);
  border: none;
  border-radius: 2px;
  color: var(--bg-dark);
  font-weight: bold;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
}

.editor-view .folder-add-btn:hover {
  background: var(--primary);
}

.editor-view .folder-tree {
  flex: 1;
  overflow-y: auto;
  padding: 8px 0;
}

.editor-view .folder-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  cursor: pointer;
  transition: all 0.15s;
  font-size: 9px;
  color: var(--text-secondary);
}

.editor-view .folder-item:hover {
  background: var(--bg-medium);
}

.editor-view .folder-item.selected {
  background: var(--accent);
  background: rgba(0, 212, 255, 0.2);
  border-left: 2px solid var(--accent);
}

.editor-view .folder-icon {
  font-size: 12px;
  flex-shrink: 0;
}

.editor-view .folder-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-family: 'Press Start 2P', monospace;
  font-size: 7px;
}

.editor-view .folder-count {
  font-family: 'Press Start 2P', monospace;
  font-size: 6px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.editor-view .folder-actions {
  display: none;
  gap: 2px;
  flex-shrink: 0;
}

.editor-view .folder-item:hover .folder-actions {
  display: flex;
}

.editor-view .folder-action-btn {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: 2px;
  cursor: pointer;
  font-size: 10px;
  opacity: 0.7;
  transition: all 0.15s;
}

.editor-view .folder-action-btn:hover {
  background: var(--bg-light);
  opacity: 1;
}

.editor-view .folder-rename-input {
  flex: 1;
  font-family: 'Press Start 2P', monospace;
  font-size: 7px;
  padding: 2px 4px;
  background: var(--bg-medium);
  border: 1px solid var(--accent);
  color: var(--text-primary);
  border-radius: 2px;
}

/* New Folder Input */
.editor-view .new-folder-input-row {
  display: flex;
  gap: 4px;
  padding: 6px 10px;
  background: var(--bg-medium);
  border-bottom: 1px solid var(--border-color);
}

.editor-view .new-folder-input {
  flex: 1;
  font-family: 'Press Start 2P', monospace;
  font-size: 7px;
  padding: 4px 6px;
  background: var(--bg-dark);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  border-radius: 2px;
}

.editor-view .new-folder-input:focus {
  outline: none;
  border-color: var(--accent);
}

.editor-view .new-folder-ok-btn,
.editor-view .new-folder-cancel-btn {
  width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  cursor: pointer;
  font-size: 10px;
  border-radius: 2px;
}

.editor-view .new-folder-ok-btn {
  background: var(--success);
  color: var(--bg-dark);
}

.editor-view .new-folder-cancel-btn {
  background: var(--error);
  color: white;
}

.editor-view .new-folder-ok-btn:hover,
.editor-view .new-folder-cancel-btn:hover {
  filter: brightness(1.2);
}

.editor-view .subfolder-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 10px;
  font-family: 'Press Start 2P', monospace;
  font-size: 6px;
  color: var(--text-muted);
  border-top: 1px solid var(--border-color);
  cursor: pointer;
}

.editor-view .subfolder-toggle input {
  cursor: pointer;
}

.editor-view .subfolder-toggle:hover {
  color: var(--text-secondary);
}

/* Main content area when sidebar is present */
.editor-view .asset-main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow: hidden;
  min-width: 0; /* Allow flex item to shrink */
}

.editor-view .asset-main-content .asset-grid {
  max-height: none;
  min-height: 200px;
}

.editor-view .upload-folder-hint {
  font-family: 'Press Start 2P', monospace;
  font-size: 6px;
  color: var(--accent);
  margin-left: auto;
}

.editor-view .asset-folder-path {
  font-family: 'Press Start 2P', monospace;
  font-size: 6px;
  color: var(--text-muted);
  margin-top: 2px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Drag over folder highlight */
.editor-view .folder-item.drag-over {
  background: rgba(0, 212, 255, 0.3);
  border-left: 2px solid var(--primary);
}

/* Asset Selector in Properties */
.editor-view .asset-selector {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.editor-view .asset-preview-small {
  width: 100%;
  height: 60px;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  background-color: var(--bg-medium);
  border: 1px solid var(--border-color);
  border-radius: 2px;
  image-rendering: pixelated;
}

/* Assets Section in Left Panel */
.editor-view .asset-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.editor-view .asset-thumbnail {
  width: 24px;
  height: 24px;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  background-color: var(--bg-dark);
  border-radius: 2px;
  image-rendering: pixelated;
  flex-shrink: 0;
  position: relative;
}

.editor-view .asset-thumbnail .s3-indicator {
  position: absolute;
  bottom: -2px;
  right: -2px;
  font-size: 8px;
}

.editor-view .asset-dims {
  font-size: 7px;
  color: var(--text-muted);
  margin-left: auto;
}

.editor-view .manage-assets-btn {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
  padding: 6px 8px;
  border-radius: 2px;
  cursor: pointer;
  width: 100%;
  margin-top: 8px;
  transition: all 0.2s;
}

.editor-view .manage-assets-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

/* Canvas Background with Image */
.editor-view .canvas-background.has-image {
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor-view .canvas-background.has-image .background-placeholder {
  display: none;
}

.editor-view .canvas-background .background-loading {
  font-family: 'Press Start 2P', monospace;
  font-size: 12px;
  color: var(--text-muted);
  animation: pulse 1s ease-in-out infinite;
}

/* Image element with asset */
.editor-view .image-element.has-asset {
  background-color: transparent;
  border-style: solid;
}

.editor-view .image-element.has-asset .element-label {
  display: none;
}

/* Scene Settings */
.editor-view .scene-settings {
  padding: 12px;
}

.editor-view .scene-settings .property-header {
  margin-bottom: 12px;
}

.editor-view .scene-settings .hint-text {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--border-color);
}

/* Text color for assets */
.editor-view .text-asset {
  color: #10b981;
}

/* Item icon as asset image */
.editor-view .item-icon-asset {
  width: 16px;
  height: 16px;
  display: inline-block;
  image-rendering: pixelated;
  vertical-align: middle;
  flex-shrink: 0;
}

/* Audio Management Styles */
.editor-view .audio-manager-modal {
  width: 700px;
  max-width: 90vw;
  max-height: 80vh;
}

.editor-view .audio-manager-body {
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: 60vh;
  overflow: hidden;
}

.editor-view .audio-upload-zone {
  border: 2px dashed var(--border-color);
  border-radius: 4px;
  padding: 24px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  background: var(--bg-dark);
}

.editor-view .audio-upload-zone:hover,
.editor-view .audio-upload-zone.dragging {
  border-color: var(--accent);
  background: rgba(0, 212, 255, 0.05);
}

.editor-view .audio-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
  flex: 1;
  padding: 4px;
}

.editor-view .audio-list-item {
  background: var(--bg-dark);
  border: 2px solid var(--border-color);
  border-radius: 4px;
  padding: 12px;
  transition: all 0.2s;
}

.editor-view .audio-list-item:hover {
  border-color: var(--primary);
}

.editor-view .audio-list-item.playing {
  border-color: var(--accent);
  background: rgba(0, 212, 255, 0.05);
}

.editor-view .audio-item-main {
  display: flex;
  align-items: center;
  gap: 12px;
}

.editor-view .audio-play-btn-large {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--bg-medium);
  border: 2px solid var(--border-color);
  color: var(--text-primary);
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  flex-shrink: 0;
}

.editor-view .audio-play-btn-large:hover {
  background: var(--accent);
  border-color: var(--accent);
}

.editor-view .audio-item-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.editor-view .audio-name-input {
  font-family: 'Press Start 2P', monospace;
  font-size: 9px;
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  padding: 6px 8px;
  border-radius: 2px;
  width: 100%;
}

.editor-view .audio-name-input:focus {
  outline: none;
  border-color: var(--accent);
}

.editor-view .audio-meta {
  display: flex;
  gap: 8px;
  font-size: 8px;
}

.editor-view .audio-format {
  color: var(--text-muted);
  background: var(--bg-medium);
  padding: 2px 6px;
  border-radius: 2px;
}

.editor-view .audio-duration-tag {
  color: var(--accent);
}

.editor-view .audio-type-selector {
  flex-shrink: 0;
}

.editor-view .audio-type-select {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  padding: 6px 8px;
  border-radius: 2px;
  cursor: pointer;
}

.editor-view .audio-type-select:focus {
  outline: none;
  border-color: var(--accent);
}

.editor-view .audio-delete-btn {
  background: var(--error);
  border: none;
  border-radius: 2px;
  padding: 6px 8px;
  cursor: pointer;
  font-size: 12px;
  opacity: 0.7;
  transition: opacity 0.2s;
}

.editor-view .audio-delete-btn:hover {
  opacity: 1;
}

.editor-view .empty-audio {
  text-align: center;
  color: var(--text-muted);
  font-size: 9px;
  padding: 24px;
}

.editor-view .audio-count {
  font-size: 9px;
  color: var(--text-muted);
  margin-right: auto;
}

/* Audio in Left Panel */
.editor-view .audio-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.editor-view .audio-type-icon {
  font-size: 10px;
  flex-shrink: 0;
}

.editor-view .audio-duration {
  font-size: 7px;
  color: var(--accent);
  margin-left: auto;
}

.editor-view .audio-play-btn {
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  border-radius: 2px;
  padding: 2px 6px;
  font-size: 8px;
  cursor: pointer;
  color: var(--text-primary);
  transition: all 0.2s;
  flex-shrink: 0;
}

.editor-view .audio-play-btn:hover {
  background: var(--accent);
  border-color: var(--accent);
}

/* Audio Selector in Properties */
.editor-view .audio-selector {
  display: flex;
  gap: 8px;
  align-items: center;
}

.editor-view .audio-selector .property-select {
  flex: 1;
}

.editor-view .audio-preview-btn {
  width: 28px;
  height: 28px;
  border-radius: 4px;
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  font-size: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  flex-shrink: 0;
}

.editor-view .audio-preview-btn:hover {
  background: var(--accent);
  border-color: var(--accent);
}

/* Text color for audio */
.editor-view .text-audio {
  color: #f59e0b;
}

/* Save Status Indicator */
.editor-view .save-status {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 4px;
  font-size: 8px;
  background: var(--bg-medium);
  border: 1px solid var(--border-color);
  margin-right: 8px;
}

.editor-view .save-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  transition: background-color 0.3s;
}

.editor-view .save-status.saved .save-indicator {
  background: var(--success);
}

.editor-view .save-status.saving .save-indicator {
  background: var(--warning);
  animation: pulse 1s infinite;
}

.editor-view .save-status.unsaved .save-indicator {
  background: var(--error);
}

.editor-view .save-text {
  color: var(--text-muted);
  font-family: 'Press Start 2P', monospace;
}

.editor-view .save-status.saved .save-text {
  color: var(--success);
}

.editor-view .save-status.saving .save-text {
  color: var(--warning);
}

.editor-view .save-status.unsaved .save-text {
  color: var(--error);
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* =========================
   PLAY MODE STYLES
   ========================= */

/* Canvas in Play Mode */
.editor-view .canvas-area.play-mode-active {
  background: var(--bg-dark);
}

.editor-view .canvas-wrapper.play-mode {
  cursor: crosshair;
}

/* Player Character */
.editor-view .play-mode-player {
  position: absolute;
  pointer-events: none;
  z-index: 1000;
}

.editor-view .player-animation {
  width: 100%;
  height: 100%;
  image-rendering: pixelated;
}

.editor-view .player-placeholder {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
  border: 2px solid #c084fc;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
}

.editor-view .player-direction-indicator {
  font-family: 'Press Start 2P', monospace;
  font-size: 16px;
  color: white;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

/* Walk Target Indicator */
.editor-view .walk-target-indicator {
  position: absolute;
  width: 12px;
  height: 12px;
  margin-left: -6px;
  margin-top: -6px;
  border: 2px solid var(--accent);
  border-radius: 50%;
  pointer-events: none;
  z-index: 999;
  animation: walkTargetPulse 0.8s ease-in-out infinite;
}

@keyframes walkTargetPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.5);
    opacity: 0.5;
  }
}

/* Play Mode UI Overlay */
.editor-view .play-mode-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 2000;
}

.editor-view .play-mode-overlay > * {
  pointer-events: auto;
}

/* Exit Play Mode Button */
.editor-view .exit-play-btn {
  position: absolute;
  top: 16px;
  right: 16px;
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  background: var(--error);
  color: white;
  border: 2px solid #ff8a8a;
  padding: 10px 16px;
  cursor: pointer;
  transition: all 0.2s;
  text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.3);
}

.editor-view .exit-play-btn:hover {
  background: #ff6b6b;
  transform: scale(1.05);
}

/* Play Message (above actor) */
.editor-view .play-message {
  position: absolute;
  transform: translate(-50%, -100%);
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  background: rgba(0, 0, 0, 0.9);
  color: white;
  padding: 12px 16px;
  border: 2px solid var(--primary);
  border-radius: 4px;
  max-width: 300px;
  text-align: center;
  line-height: 1.6;
  white-space: pre-wrap;
  pointer-events: none;
  z-index: 1000;
  animation: messageAppear 0.2s ease-out;
}

.editor-view .play-message::after {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-top: 8px solid var(--primary);
}

@keyframes messageAppear {
  from {
    opacity: 0;
    transform: translate(-50%, -100%) translateY(10px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -100%) translateY(0);
  }
}

/* Dialog Box */
.editor-view .dialog-box {
  position: absolute;
  bottom: 140px;
  left: 50%;
  transform: translateX(-50%);
  width: 70%;
  max-width: 700px;
  background: linear-gradient(180deg, #1a1a2e 0%, #0f0f23 100%);
  border: 4px solid var(--primary);
  padding: 20px 24px;
  cursor: pointer;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

.editor-view .dialog-speaker {
  font-family: 'Press Start 2P', monospace;
  font-size: 11px;
  color: var(--accent);
  margin-bottom: 12px;
  text-transform: uppercase;
}

.editor-view .dialog-text {
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  color: var(--text-primary);
  line-height: 2;
  margin-bottom: 12px;
}

.editor-view .dialog-hint {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
  text-align: right;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* Verb Bar */
.editor-view .verb-bar {
  position: absolute;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 4px;
  background: rgba(0, 0, 0, 0.9);
  padding: 8px 12px;
  border: 2px solid var(--border-color);
}

.editor-view .verb-btn {
  font-family: 'Press Start 2P', monospace;
  font-size: 9px;
  background: var(--bg-medium);
  color: var(--text-secondary);
  border: 2px solid var(--border-color);
  padding: 8px 12px;
  cursor: pointer;
  transition: all 0.2s;
  text-transform: uppercase;
}

.editor-view .verb-btn:hover {
  background: var(--bg-light);
  border-color: var(--primary);
  color: var(--text-primary);
}

.editor-view .verb-btn.active {
  background: var(--primary);
  color: var(--bg-dark);
  border-color: var(--primary);
}

/* Inventory Bar */
.editor-view .inventory-bar {
  position: absolute;
  bottom: 16px;
  right: 16px;
  background: rgba(0, 0, 0, 0.9);
  border: 2px solid var(--border-color);
  padding: 8px;
  min-width: 150px;
}

.editor-view .inventory-label {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--primary);
  margin-bottom: 8px;
  text-align: center;
}

.editor-view .inventory-slots {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  justify-content: center;
}

.editor-view .inventory-slot {
  width: 36px;
  height: 36px;
  background: var(--bg-medium);
  border: 2px solid var(--border-color);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
}

.editor-view .inventory-slot:hover {
  border-color: var(--accent);
  background: var(--bg-light);
}

.editor-view .inventory-slot .item-icon {
  width: 100%;
  height: 100%;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  image-rendering: pixelated;
}

.editor-view .inventory-slot .item-name {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
}

/* Hovered Object Name */
.editor-view .hovered-object-name {
  position: absolute;
  top: 16px;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Press Start 2P', monospace;
  font-size: 11px;
  color: var(--accent);
  background: rgba(0, 0, 0, 0.85);
  padding: 8px 16px;
  border: 2px solid var(--accent);
}

/* Fade Overlay for Transitions */
.editor-view .fade-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: #000;
  pointer-events: none;
  z-index: 3000;
}

/* Skip Cutscene Button */
.editor-view .skip-cutscene-btn {
  position: absolute;
  bottom: 80px;
  right: 16px;
  font-family: 'Press Start 2P', monospace;
  font-size: 9px;
  background: rgba(0, 0, 0, 0.8);
  color: var(--text-muted);
  border: 2px solid var(--border-color);
  padding: 8px 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.editor-view .skip-cutscene-btn:hover {
  color: var(--text-primary);
  border-color: var(--primary);
}

/* Cutscene Indicator */
.editor-view .cutscene-indicator {
  position: absolute;
  top: 16px;
  left: 16px;
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  color: var(--warning);
  background: rgba(0, 0, 0, 0.85);
  padding: 8px 12px;
  border: 2px solid var(--warning);
  animation: cutscenePulse 2s infinite;
}

@keyframes cutscenePulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

/* Selected Item Indicator */
.editor-view .selected-item-indicator {
  position: absolute;
  top: 60px;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  color: var(--primary);
  background: rgba(0, 0, 0, 0.9);
  padding: 8px 16px;
  border: 2px solid var(--primary);
  display: flex;
  align-items: center;
  gap: 12px;
}

.editor-view .cancel-item-btn {
  background: var(--error);
  border: none;
  color: white;
  width: 20px;
  height: 20px;
  font-size: 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor-view .cancel-item-btn:hover {
  background: #ff6b6b;
}

/* Inventory Improvements */
.editor-view .inventory-slot.selected {
  border-color: var(--primary) !important;
  background: rgba(201, 162, 39, 0.2) !important;
  box-shadow: 0 0 10px rgba(201, 162, 39, 0.5);
}

.editor-view .inventory-empty {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
  padding: 8px;
  text-align: center;
}

/* Music Indicator */
.editor-view .music-indicator {
  position: absolute;
  bottom: 80px;
  left: 16px;
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-muted);
  background: rgba(0, 0, 0, 0.7);
  padding: 6px 10px;
  border-radius: 4px;
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Scene Map Button in Header */
.editor-view .map-btn {
  background: var(--accent) !important;
  border-color: #00d4ff !important;
  color: var(--bg-dark) !important;
}

.editor-view .map-btn:hover {
  background: #00a8cc !important;
  transform: scale(1.05);
}

/* Play Button in Header */
.editor-view .play-btn {
  background: var(--success) !important;
  border-color: #00ff88 !important;
  color: var(--bg-dark) !important;
}

.editor-view .play-btn:hover {
  background: #00cc6a !important;
  transform: scale(1.05);
}

/* Context Menu */
.editor-view .context-menu {
  position: fixed;
  z-index: 10000;
  background: var(--bg-card);
  border: 2px solid var(--primary);
  border-radius: 4px;
  min-width: 180px;
  box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
  padding: 4px 0;
  font-size: 11px;
}

.editor-view .context-menu-header {
  padding: 6px 12px;
  color: var(--text-secondary);
  font-size: 10px;
  border-bottom: 1px solid var(--bg-medium);
  margin-bottom: 4px;
}

.editor-view .context-menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 8px 12px;
  background: none;
  border: none;
  color: var(--text-primary);
  cursor: pointer;
  text-align: left;
  font-family: inherit;
  font-size: 11px;
  transition: background 0.1s;
}

.editor-view .context-menu-item:hover {
  background: var(--bg-medium);
}

.editor-view .context-menu-item-danger:hover {
  background: rgba(255, 71, 87, 0.2);
  color: var(--error);
}

.editor-view .context-menu-divider {
  height: 1px;
  background: var(--bg-medium);
  margin: 4px 0;
}

.editor-view .context-menu-info {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  color: var(--text-muted);
  font-size: 10px;
}

.editor-view .menu-icon {
  width: 16px;
  text-align: center;
}

/* Group indicator on elements */
.editor-view .element-rect.in-group {
  outline: 2px dashed #00d4ff;
  outline-offset: 2px;
}

.editor-view .group-indicator {
  position: absolute;
  top: -18px;
  left: 50%;
  transform: translateX(-50%);
  background: #00d4ff;
  color: var(--bg-dark);
  font-size: 8px;
  padding: 2px 6px;
  border-radius: 3px;
  white-space: nowrap;
  pointer-events: none;
}

/* ========================
   AI Panel Styles
   ======================== */

.editor-view .ai-btn {
  background: linear-gradient(135deg, #8b5cf6, #6366f1) !important;
  border-color: #8b5cf6 !important;
}

.editor-view .ai-btn:hover {
  background: linear-gradient(135deg, #a78bfa, #818cf8) !important;
  box-shadow: 0 0 12px rgba(139, 92, 246, 0.5);
}

.editor-view .ai-panel-overlay {
  backdrop-filter: blur(4px);
}

.editor-view .ai-panel-modal {
  width: 90%;
  max-width: 800px;
  height: 85vh;
  max-height: 800px;
  display: flex;
  flex-direction: column;
}

.editor-view .ai-header {
  display: flex;
  align-items: center;
  gap: 12px;
  background: linear-gradient(135deg, #1e1e3f, #2a2a4a);
  border-bottom: 2px solid #8b5cf6;
}

.editor-view .ai-header-left {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.editor-view .ai-header-left h3 {
  margin: 0;
  color: #a78bfa;
}

.editor-view .ai-icon {
  font-size: 24px;
}

.editor-view .ai-header-status {
  margin-right: 12px;
}

.editor-view .ai-connection-status {
  font-size: 11px;
  color: var(--text-muted);
  padding: 4px 8px;
  background: var(--bg-dark);
  border-radius: 4px;
}

.editor-view .ai-connection-status.connected {
  color: var(--success);
}

.editor-view .ai-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow: hidden;
  padding: 16px;
}

.editor-view .ai-status-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: var(--bg-dark);
  border-radius: 6px;
  border-left: 3px solid var(--text-muted);
}

.editor-view .ai-status-bar.idle {
  border-left-color: var(--text-muted);
}

.editor-view .ai-status-bar.connecting {
  border-left-color: var(--warning);
  background: rgba(255, 170, 0, 0.1);
}

.editor-view .ai-status-bar.generating {
  border-left-color: #8b5cf6;
  background: rgba(139, 92, 246, 0.1);
  animation: pulse 1.5s ease-in-out infinite;
}

.editor-view .ai-status-bar.complete {
  border-left-color: var(--success);
  background: rgba(0, 255, 136, 0.1);
}

.editor-view .ai-status-bar.error {
  border-left-color: var(--error);
  background: rgba(255, 71, 87, 0.1);
}

.editor-view .ai-status-icon {
  font-size: 16px;
}

.editor-view .ai-status-message {
  font-size: 12px;
  color: var(--text-secondary);
}

.editor-view .ai-script-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.editor-view .ai-script-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.editor-view .ai-label {
  font-size: 12px;
  font-weight: bold;
  color: var(--text-secondary);
}

.editor-view .ai-sample-btn {
  background: var(--bg-dark);
  border: 1px solid var(--bg-medium);
  color: var(--text-secondary);
  padding: 4px 10px;
  border-radius: 4px;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.2s;
}

.editor-view .ai-sample-btn:hover {
  background: var(--bg-medium);
  color: var(--primary);
  border-color: var(--primary);
}

.editor-view .ai-script-textarea {
  flex: 1;
  width: 100%;
  min-height: 200px;
  background: var(--bg-dark);
  border: 2px solid var(--bg-medium);
  border-radius: 6px;
  color: var(--text-primary);
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 12px;
  line-height: 1.5;
  padding: 12px;
  resize: none;
  outline: none;
}

.editor-view .ai-script-textarea:focus {
  border-color: #8b5cf6;
  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
}

.editor-view .ai-script-textarea:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.editor-view .ai-script-textarea::placeholder {
  color: var(--text-muted);
  opacity: 0.6;
}

.editor-view .ai-tips {
  margin-top: 4px;
}

.editor-view .ai-tips summary {
  font-size: 11px;
  color: var(--text-muted);
  cursor: pointer;
  padding: 6px;
  background: var(--bg-dark);
  border-radius: 4px;
}

.editor-view .ai-tips summary:hover {
  color: var(--text-secondary);
}

.editor-view .ai-tips-content {
  padding: 10px;
  background: var(--bg-dark);
  border-radius: 0 0 4px 4px;
  font-size: 11px;
  line-height: 1.6;
}

.editor-view .ai-tips-content p {
  margin: 4px 0;
  color: var(--text-muted);
}

.editor-view .ai-tips-content strong {
  color: #8b5cf6;
}

.editor-view .ai-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: var(--bg-dark);
  border-top: 1px solid var(--bg-medium);
}

.editor-view .ai-footer-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.editor-view .ai-char-count {
  font-size: 11px;
  color: var(--text-muted);
}

.editor-view .ai-footer-right {
  display: flex;
  gap: 8px;
}

.editor-view .ai-generate-btn {
  background: linear-gradient(135deg, #8b5cf6, #6366f1) !important;
  border-color: #8b5cf6 !important;
  padding: 8px 20px !important;
  font-weight: bold;
}

.editor-view .ai-generate-btn:hover:not(:disabled) {
  background: linear-gradient(135deg, #a78bfa, #818cf8) !important;
  box-shadow: 0 0 12px rgba(139, 92, 246, 0.5);
}

.editor-view .ai-generate-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.editor-view .generating-spinner {
  display: inline-block;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* Background Scale Feature */
.editor-view .background-scale-hint {
  margin-top: var(--space-sm);
  padding: var(--space-sm);
  background: rgba(255, 170, 0, 0.1);
  border: 1px solid var(--warning);
  border-radius: 4px;
}

.editor-view .size-mismatch-text {
  display: block;
  font-size: 8px;
  color: var(--warning);
  margin-bottom: var(--space-xs);
}

.editor-view .scale-background-btn {
  width: 100%;
  padding: 6px 8px;
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  background: linear-gradient(180deg, var(--warning), #cc8800);
  color: #000;
  border: 2px solid #ffcc00;
  cursor: pointer;
  transition: all 0.15s;
}

.editor-view .scale-background-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(255, 170, 0, 0.4);
}

/* Background Scale Modal */
.editor-view .background-scale-modal {
  background: var(--bg-card);
  border: 4px solid var(--primary);
  border-radius: 8px;
  padding: var(--space-lg);
  width: 90%;
  max-width: 400px;
}

.editor-view .background-scale-modal .modal-title {
  font-family: 'Press Start 2P', monospace;
  font-size: 11px;
  color: var(--primary);
  margin: 0 0 var(--space-md) 0;
  text-align: center;
}

.editor-view .scale-info {
  background: var(--bg-dark);
  padding: var(--space-sm);
  margin-bottom: var(--space-md);
  border-radius: 4px;
}

.editor-view .scale-info-row {
  display: flex;
  justify-content: space-between;
  font-size: 9px;
  padding: 4px 0;
}

.editor-view .info-label {
  color: var(--text-muted);
}

.editor-view .info-value {
  color: var(--text-primary);
  font-family: monospace;
}

.editor-view .scale-options {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

.editor-view .scale-option {
  display: flex;
  align-items: flex-start;
  gap: var(--space-sm);
  padding: var(--space-sm);
  background: var(--bg-medium);
  border: 2px solid var(--border-color);
  cursor: pointer;
  transition: all 0.15s;
}

.editor-view .scale-option:hover {
  border-color: var(--accent);
}

.editor-view .scale-option.active {
  border-color: var(--primary);
  background: rgba(201, 162, 39, 0.1);
}

.editor-view .scale-option input {
  margin-top: 2px;
}

.editor-view .option-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.editor-view .option-icon {
  font-size: 14px;
}

.editor-view .option-name {
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  color: var(--text-primary);
}

.editor-view .option-desc {
  font-size: 8px;
  color: var(--text-muted);
}

.editor-view .modal-actions {
  display: flex;
  gap: var(--space-sm);
  justify-content: flex-end;
}

.editor-view .modal-btn {
  padding: 8px 16px;
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  border: 2px solid;
  cursor: pointer;
  transition: all 0.15s;
}

.editor-view .modal-btn-cancel {
  background: var(--bg-medium);
  border-color: var(--border-color);
  color: var(--text-secondary);
}

.editor-view .modal-btn-cancel:hover {
  border-color: var(--text-muted);
}

.editor-view .modal-btn-confirm {
  background: linear-gradient(180deg, var(--success), #00cc66);
  border-color: var(--success);
  color: #000;
}

.editor-view .modal-btn-confirm:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 255, 136, 0.4);
}

.editor-view .modal-btn-confirm:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.editor-view .scale-note {
  font-size: 8px;
  color: var(--text-muted);
  text-align: center;
  margin-top: var(--space-sm);
  padding-top: var(--space-sm);
  border-top: 1px solid var(--border-color);
}
